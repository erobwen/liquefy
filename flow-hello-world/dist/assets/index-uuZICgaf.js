(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const w of d.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&o(w)}).observe(document,{childList:!0,subtree:!0});function t(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(a){if(a.ep)return;a.ep=!0;const d=t(a);fetch(a.href,d)}})();function re(i){return Array.prototype.slice.call(i)}function fe(i,e){if(e instanceof Array){_t(i.causality.target,e.causality.target).forEach(function(t){let o=[];o.push(t.index,t.removed.length),o.push.apply(o,t.added),i.splice.apply(i,o)});for(let t in e)isNaN(t)&&(i[t]=e[t])}else for(let t in e)i[t]=e[t];return i}function _t(i,e){let t=!1,o=[],a=0,d=0,w=0;function y(p){let b={type:"splice",index:a+w,removed:[],added:p};w+=p.length,o.push(b)}function l(p){let b={type:"splice",index:a+w,removed:p,added:[]};w-=p.length,o.push(b)}function c(p,b){let C={type:"splice",index:a+w,removed:p,added:b};w-=p.length,w+=b.length,o.push(C)}for(;!t;){for(;a<i.length&&d<e.length&&i[a]===e[d];)a++,d++;if(a===i.length&&d===e.length)t=!0;else if(d===e.length){const p=[];let b=a;for(;b<i.length;)p.push(i[b++]);l(p),t=!0}else if(a===i.length){const p=[];for(;d<e.length;)p.push(e[d++]);y(p),t=!0}else{let p=a,b=d,C=!1;for(;p<i.length&&!C;){for(b=d;b<e.length&&!C;)i[p]===e[b]&&(C=!0),C||b++;C||p++}c(i.slice(a,p),e.slice(d,b)),a=p,d=b}}return o}function Ut(i){return i.name?i.name:(i=Xe(i),JSON.stringify(i))}function Xe(i){if(typeof i=="object"){if(i===null)return"null";let e=Object.keys(i);e.sort(function(o,a){return o<a?-1:o>a?1:0});let t={};return e.forEach(function(o){let a=i[o];typeof a=="object"&&(a=Xe(a)),t[o]=a}),t}else return"["+typeof i+"]"}const Be={Reset:"\x1B[0m",Bright:"\x1B[1m",Dim:"\x1B[2m",Underscore:"\x1B[4m",Blink:"\x1B[5m",Reverse:"\x1B[7m",Hidden:"\x1B[8m",FgBlack:"\x1B[30m",FgRed:"\x1B[31m",FgGreen:"\x1B[32m",FgYellow:"\x1B[33m",FgBlue:"\x1B[34m",FgMagenta:"\x1B[35m",FgCyan:"\x1B[36m",FgWhite:"\x1B[37m",BgBlack:"\x1B[40m",BgRed:"\x1B[41m",BgGreen:"\x1B[42m",BgYellow:"\x1B[43m",BgBlue:"\x1B[44m",BgMagenta:"\x1B[45m",BgCyan:"\x1B[46m",BgWhite:"\x1B[47m"};let I={bufferWidth:83,indentToken:"  ",findLogs:!1,useConsoleDefault:!1},Z=0;function Vt(){function i(e){return e?i(e.caller).concat([e.toString().split("(")[0].substring(9)+"("+e.arguments.join(",")+")"]):[]}return i(arguments.callee.caller)}function ve(i){let e="";for(;i-- >0;)e=e+I.indentToken;return e}function be(){const i={terminated:!1,rootLevel:!0,horizontal:!1,indentLevel:Z,unfinishedLine:!1};return i.resetColor=()=>{i.setColor("Reset")},i}function Ht(){let i=be();return i.result="",i.log=function(e){this.unfinishedLine?(this.result+=e,this.unfinishedLine=!0):(this.result+=ve(this.indentLevel)+e,this.unfinishedLine=!0)},i.finishOpenLine=function(){this.unfinishedLine&&!this.horizontal&&(this.result+=`
`,this.unfinishedLine=!1)},i.setColor=function(){},i.jsonCompatible=!0,i}function oe(){let i=be();return i.lineMemory="",i.log=function(e){if(this.unfinishedLine)typeof process<"u"?process.stdout.write(e):i.lineMemory+=e,this.unfinishedLine=!0;else{let t=ve(this.indentLevel);typeof process<"u"?process.stdout.write(t+e):i.lineMemory+=t+e,this.unfinishedLine=!0}},i.finishOpenLine=function(){this.unfinishedLine&&!this.horizontal&&(i.lineMemory!==""?(console.log(i.lineMemory),i.lineMemory=""):console.log(),this.unfinishedLine=!1)},i.setColor=function(e){Be[e]||(e="Reset"),i.log(Be[e])},i.jsonCompatible=!1,i}function $t(i,e){let t=be();return t.horizontal=!0,t.count=0,t.limit=i,t.log=function(o){if(this.unfinishedLine)this.count+=o.length,this.terminated=this.count>this.limit,this.unfinishedLine=!0;else{let a=ve(this.indentLevel);this.count+=(a+o).length,this.terminated=this.count>this.limit,this.unfinishedLine=!0}},t.finishOpenLine=function(){},t.setColor=function(){},t.jsonCompatible=e.jsonCompatible,t}function _e(i,e,t,o){let a=$t(t,o);return j(i,e,a),!a.terminated}function j(i,e,t){const o=t.rootLevel,a=t.jsonCompatible;if(t.rootLevel=!1,typeof e>"u"&&(e=1),typeof e=="function"&&(i=e(i),e=-1),!t.terminated){if(typeof i!="object")if(typeof i=="function")t.setColor("FgBlue"),t.log("function( ... ) { ... }"),t.resetColor();else if(typeof i=="string")if(o)t.log(i);else{t.setColor("FgGreen");const d=a?'"':"'";t.log(d+i+d),t.resetColor()}else t.setColor("FgYellow"),t.log(i+""),t.resetColor();else if(i===null)t.log("null");else if(e===0)i instanceof Array?(t.log("["),t.setColor("FgCyan"),t.log("..."),t.resetColor(),t.log("]")):(t.log("{"),t.setColor("FgCyan"),t.log("..."),t.resetColor(),t.log("}"));else{let d=i instanceof Array;const w=Object.keys(i).length;let y=!1;if(!t.horizontal){let c=I.bufferWidth-t.indentLevel*I.indentToken.length;t.horizontal=I.bufferWidth===-1?!0:_e(i,e,c,t),y=t.horizontal}d&&t.finishOpenLine(),t.log(d?"[":"{"),t.horizontal&&w&&t.log(" "),t.finishOpenLine(),t.indentLevel++;let l=!0;for(let c in i){l||(t.log(", "),t.finishOpenLine()),(!d||isNaN(c))&&(a&&t.log('"'),t.log(c),a&&t.log('"'),t.log(": "));let p=null;typeof e=="object"?p=e[c]:p=e===-1?-1:e-1,d||t.indentLevel++,j(i[c],p,t),d||t.indentLevel--,l=!1}t.indentLevel--,t.finishOpenLine(),t.horizontal&&w&&t.log(" "),t.log(d?"]":"}"),y&&(t.horizontal=!1)}o&&t.finishOpenLine()}}const Y={configuration:I,stacktrace:Vt,log(i,e){if(Y.findLogs)throw new Error("No logs allowed!");I.useConsoleDefault?console.log(i):j(i,e,oe())},logToString(i,e){let t=Ht();return j(i,e,t),t.result},loge(i){this.log("<<<"+i+">>>")},logs(){this.log("---------------------------------------")},logss(){this.log("=======================================")},logsss(){this.log("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX")},logVar(i,e,t){if(Y.findLogs)throw new Error("No logs allowed!");if(I.useConsoleDefault)console.log(i+":"),console.group(),console.log(e),console.groupEnd();else{context=oe(),typeof t>"u"&&(t=1),context.log(i+": ");let o=I.bufferWidth-context.indentLevel*I.indentToken.length-(i+": ").length;context.horizontal=I.bufferWidth===-1?!0:_e(e,t,o),context.horizontal?j(e,t,context):(context.indentLevel++,j(e,t,context),context.indentLevel--)}},group(i,e){if(Y.findLogs)throw new Error("No logs allowed!");I.useConsoleDefault?console.group(i):(typeof i<"u"&&j(i,e,oe()),Z++)},groupEnd(i,e){if(Y.findLogs)throw new Error("No logs allowed!");I.useConsoleDefault?console.groupEnd():(Z--,Z<0&&(Z=0),typeof i<"u"&&j(i,e,oe()))}};function Kt(i){function e(c,p){if(typeof c!=typeof p)return!1;if(c.length===p.length){for(let b=0;b<c.length;b++)if(c[b]!==p[b])return!1;return!0}else return!1}function t(c,p){if(c.length===0)return!1;for(let b=0;b<c.length;b++)if(e(c[b].argumentList,p))return!0;return!1}function o(c,{signature:p,unique:b,argumentList:C}){return b?typeof c[p]<"u":typeof c[p]>"u"?!1:t(c[p],C)}function a(c,{signature:p,unique:b,argumentList:C}){if(b)return c[p];{let N=c[p];for(let x=0;x<N.length;x++)if(e(N[x].argumentList,C))return N[x].value}}function d(c,{signature:p,unique:b,argumentList:C}){if(b){delete c[p];return}else{let N=c[p];for(let x=0;x<N.length;x++)if(e(N[x].argumentList,functionArguments)){N.splice(x,1);return}}}function w(c,{signature:p,unique:b,argumentList:C},N){if(b)c[p]=N;else{let x=c[p];x||(x=i([]),c[p]=x),x.push({argumentList:C,value:N})}}function y(c){let p=!0,b="";return c.forEach(function(C,N){N>0&&(b+=","),typeof C.causality<"u"?b+="{id="+C.causality.id+"}":typeof C=="number"||typeof C=="string"?b+=C:(p=!1,b+="{}")}),{signature:"("+b+")",unique:p,argumentList:c}}function l(c){const p=i({});return()=>{argumentsToArray(arguments);let b=y(argumentList);return o(p,b)||invalidateOnChange(()=>{const C=c.apply(null,argumentList);w(p,b,C)},()=>{d(p,b)}),a(p,b)}}return l}let Fe=500;function Gt(i){const e=i.state,t=i.invalidateObserver;function o(y,l,c){return typeof l!="string"&&(c=l,l=null),{description:y,key:l,handler:c,isRoot:!0,contents:{},contentsCounter:0,first:null,last:null}}function a(y,l,c){let p=y.id;if(typeof l.contents[p]<"u"||l.contentsCounter===Fe&&l.last!==null&&(l=l.last,typeof l.contents[p]<"u"))return;if(l.contentsCounter===Fe){let C={isRoot:!1,contents:{},contentsCounter:0,next:null,previous:null,parent:null};l.isRoot?(C.parent=l,l.first=C,l.last=C):(l.next=C,C.previous=l,C.parent=l.parent,l.parent.last=C),l=C}let b=l.contents;typeof b[p]>"u"&&(l.contentsCounter=l.contentsCounter+1,b[p]=y,y.sources.push(l))}function d(y,l,c){if(e.postponeInvalidation++,e.blockInvalidation>0)return;let p=y.contents;for(let b in p)t(p[b],l,c);if(typeof y.first<"u"){let b=y.first;for(;b!==null;){let C=b.contents;for(let N in C)t(C[N],l,c);b=b.next}}e.postponeInvalidation--,i.proceedWithPostponedInvalidations()}function w(y,l){let c=l.contents;delete c[y];let p=!1;l.contentsCounter--,l.contentsCounter==0&&(l.isRoot?l.first===null&&l.last===null&&(p=!0):(l.parent.first===l&&(l.parent.first,l.next),l.parent.last===l&&(l.parent.last,l.previous),l.next!==null&&(l.next.previous=l.previous),l.previous!==null&&(l.previous.next=l.next),l.previous=null,l.next=null,l.parent.first===null&&l.parent.last===null&&(p=!0)),p&&typeof l.handler.proxy.onRemovedLastObserver=="function"&&l.handler.proxy.onRemovedLastObserver(l.description,l.key))}return{recordDependencyOnArray:(y,l)=>{l._arrayObservers===null&&(l._arrayObservers=o("arrayDependees",l)),a(y,l._arrayObservers)},recordDependencyOnEnumeration:(y,l)=>{typeof l._enumerateObservers>"u"&&(l._enumerateObservers=o("enumerationDependees",l)),a(y,l._enumerateObservers)},recordDependencyOnProperty:(y,l,c)=>{c!=="toString"&&(typeof l._propertyObservers>"u"&&(l._propertyObservers={}),typeof l._propertyObservers[c]>"u"&&(l._propertyObservers[c]=o("propertyDependees",c,l)),a(y,l._propertyObservers[c]))},invalidateArrayObservers:(y,l)=>{y._arrayObservers!==null&&d(y._arrayObservers,y.proxy,l)},invalidatePropertyObservers:(y,l)=>{typeof y._propertyObservers<"u"&&typeof y._propertyObservers[l]<"u"&&d(y._propertyObservers[l],y.proxy,l)},invalidateEnumerateObservers:(y,l)=>{typeof y._enumerateObservers<"u"&&d(y._enumerateObservers,y.proxy,l)},removeAllSources:y=>{const l=y.id;y.sources.forEach(function(c){w(l,c)}),y.sources.length=0}}}const Zt=Y,Yt={requireRepeaterName:!1,requireInvalidatorName:!1,warnOnNestedRepeater:!0,alwaysDependOnParentRepeater:!1,priorityLevels:4,objectMetaProperty:"causality",useNonObservablesAsValues:!1,valueComparisonDepthLimit:5,sendEventsToObjects:!0,onEventGlobal:null,emitReBuildEvents:!1,onWriteGlobal:null,onReadGlobal:null,cannotReadPropertyValue:null,customObjectlog:null,customDependencyInterfaceCreator:null,customCreateInvalidator:null,customCreateRepeater:null};function Jt(i){const e={recordingPaused:0,blockInvalidation:0,postponeInvalidation:0,postponeRefreshRepeaters:0,nextObjectId:1,nextTempObjectId:1,context:null,observerId:0,inActiveRecording:!1,nextObserverToInvalidate:null,lastObserverToInvalidate:null,inRepeater:null,dirtyRepeaters:[...Array(i.priorityLevels).keys()].map(()=>({first:null,last:null})),refreshingAllDirtyRepeaters:!1,workOnPriorityLevel:[...Array(i.priorityLevels).keys()].map(()=>0),revalidationLevelLock:-1},t={name:i.name,sameAsPreviousDeep:ue,observable:te,deeplyObservable:Se,isObservable:D,create:te,invalidateOnChange:It,repeat:Bt,finalize:Dt,withoutRecording:at,withoutReactions:ut,doWhileInvalidationsPostponed:Ne,transaction:Ne,postponeInvalidations:lt,continueInvalidations:dt,clearRepeaterLists:kt,log:Wt,loge:n=>{N.loge(n)},logs:()=>{N.logs()},logss:()=>{N.logss()},logsss:()=>{N.logss()},logGroup:zt,logUngroup:qt,logToString:Xt,state:e,enterContext:Q,leaveContext:ee,invalidateObserver:Rt,proceedWithPostponedInvalidations:he,nextObserverId:()=>e.observerId++,caching:Kt(te),enterPriorityLevel:$,exitPriorityLevel:K,workOnPriorityLevel:ht},o=i.customCreateRepeater?i.customCreateRepeater:Et,a=i.customCreateInvalidator?i.customCreateInvalidator:Tt,d=i.customDependencyInterfaceCreator?i.customDependencyInterfaceCreator(t):Gt(t),w=d.recordDependencyOnArray,y=d.recordDependencyOnEnumeration,l=d.recordDependencyOnProperty,c=d.invalidateArrayObservers,p=d.invalidateEnumerateObservers,b=d.invalidatePropertyObservers,C=d.removeAllSources,N=i.customObjectlog?i.customObjectlog:Zt,x=ct(),{requireRepeaterName:nt,requireInvalidatorName:rt,warnOnNestedRepeater:ot,objectMetaProperty:f,sendEventsToObjects:Ae,onEventGlobal:de,emitReBuildEvents:st,onWriteGlobal:T,onReadGlobal:S,cannotReadPropertyValue:F}=i,P=!!de||Ae;function at(n){e.recordingPaused++,L(),n(),e.recordingPaused--,L()}function Ne(n){e.postponeInvalidation++,n(),e.postponeInvalidation--,he()}function lt(){e.postponeInvalidation++}function dt(){e.postponeInvalidation--,he()}function ut(n){e.blockInvalidation++,n(),e.blockInvalidation--}function $(n){if(typeof n!="number"){const r=n;n=typeof r.priority=="function"?r.priority():0}e.workOnPriorityLevel[n]++}function K(n){if(typeof n!="number"){const s=n;n=typeof s.priority=="function"?s.priority():0}e.workOnPriorityLevel[n]--;let r=!0;for(;n<e.workOnPriorityLevel.length&&e.workOnPriorityLevel[n]===0;)typeof i.onFinishedPriorityLevel=="function"&&i.onFinishedPriorityLevel(n,r),e.revalidationLevelLock=n,n++,r=!1}function ht(n,r){$(n),r(),K(n)}function L(){e.inActiveRecording=e.context!==null&&e.context.isRecording&&e.recordingPaused===0,e.inRepeater=e.context&&e.context.type==="repeater"?e.context:null}function Q(n){return n.parent=e.context,e.context=n,L(),$(n),n}function ee(n){if(e.context&&n===e.context)e.context=e.context.parent;else throw new Error("Context missmatch");L(),K(n)}function ct(){const n={pop:function(){let r=this.target.length-1,s=this.target.pop();return c(this,"pop"),P&&X(this,r,[s],null),s},push:function(){let r=this.target.length,s=re(arguments);return this.target.push.apply(this.target,s),c(this,"push"),P&&X(this,r,null,s),this.target.length},shift:function(){let r=this.target.shift();return c(this,"shift"),P&&X(this,0,[r],null),r},unshift:function(){let r=re(arguments);return this.target.unshift.apply(this.target,r),c(this,"unshift"),P&&X(this,0,null,r),this.target.length},splice:function(){let r=re(arguments),s=r[0],u=r[1];typeof r[1]>"u"&&(u=this.target.length-s);let g=r.slice(2),h=this.target.slice(s,s+u),m=this.target.splice.apply(this.target,r);return c(this,"splice"),P&&X(this,s,h,g),m},copyWithin:function(r,s,u){if(s||(s=0),u||(u=this.target.length),r<0&&(s=this.target.length-r),s<0&&(s=this.target.length-s),u<0&&(s=this.target.length-u),u=Math.min(u,this.target.length),s=Math.min(s,this.target.length),s>=u)return;let g=this.target.slice(r,r+u-s),h=this.target.slice(s,u),m=this.target.copyWithin(r,s,u);return c(this,"copyWithin"),P&&X(this,r,h,g),m}};return["reverse","sort","fill"].forEach(function(r){n[r]=function(){let s=re(arguments),u=this.target.slice(0),g=this.target[r].apply(this.target,s);return c(this,r),P&&X(this,0,u,this.target.slice(0)),g}}),n}function xe(n,r){return i.useNonObservablesAsValues?ue(n,r,i.valueComparisonDepthLimit):n===r||Number.isNaN(n)&&Number.isNaN(r)}function ue(n,r,s){if(typeof s>"u"&&(s=8),n===null&&r===null||n===r||Number.isNaN(n)&&Number.isNaN(r))return!0;if(s===0||typeof n!=typeof r||typeof n!="object"||n===null||r===null||D(n)||D(r)||Object.keys(n).length!==Object.keys(r).length)return!1;for(let u in n)if(!ue(n[u],r[u],s-1))return!1;return!0}function ft(n,r){if(r===f)return this.meta;if(this.meta.forwardTo!==null){let s=this.meta.forwardTo[f].handler;return s.get.apply(s,[s.target,r])}return S&&!S(this,n,r)?F:x[r]?x[r].bind(this):(e.inActiveRecording&&w(e.context,this),n[r])}function pt(n,r,s){if(r===f)throw new Error("Cannot set the dedicated meta property '"+f+"'");if(this.meta.forwardTo!==null){let g=this.meta.forwardTo[f].handler;return g.set.apply(g,[g.target,r,s])}if(T&&!T(this,n,r))return;let u=n[r];return r in n&&xe(u,s)?!0:(isNaN(r)?(n[r]=s,(n[r]===s||Number.isNaN(n[r])&&Number.isNaN(s))&&(c(this,r),Pe(this,r,s,u))):(typeof r=="string"&&(r=parseInt(r)),n[r]=s,(n[r]===s||Number.isNaN(n[r])&&Number.isNaN(s))&&(c(this,r),Pt(this,r,s,u))),!(n[r]!==s&&!(Number.isNaN(n[r])&&Number.isNaN(s))))}function gt(n,r){if(this.meta.forwardTo!==null){let u=this.meta.forwardTo[f].handler;return u.deleteProperty.apply(u,[u.target,r])}if(T&&!T(this,n,r))return;if(!(r in n))return!0;let s=n[r];return delete n[r],r in n||(c(this,"delete"),Re(this,r,s)),!(r in n)}function mt(n){if(this.meta.forwardTo!==null){let s=this.meta.forwardTo[f].handler;return s.ownKeys.apply(s,[s.target])}if(S&&!S(this,n))return F;e.inActiveRecording&&w(e.context,this);let r=Object.keys(n);return r.push("length"),r}function yt(n,r){if(this.meta.forwardTo!==null){let s=this.meta.forwardTo[f].handler;return s.has.apply(s,[n,r])}return S&&!S(this,n,r)?F:(e.inActiveRecording&&w(e.context,this),r in n)}function vt(n,r,s){if(this.meta.forwardTo!==null){let u=this.meta.forwardTo[f].handler;return u.defineProperty.apply(u,[u.target,r,s])}if(!(T&&!T(this,n,r)))return c(this,r),n}function bt(n,r){if(this.meta.forwardTo!==null){let s=this.meta.forwardTo[f].handler;return s.getOwnPropertyDescriptor.apply(s,[s.target,r])}return S&&!S(this,n,r)?F:(e.inActiveRecording&&w(e.context,this),Object.getOwnPropertyDescriptor(n,r))}function wt(n,r){if(r=r.toString(),r===f)return this.meta;if(this.meta.forwardTo!==null){let s=this.meta.forwardTo[f].handler;return s.get.apply(s,[s.target,r])}if(S&&!S(this,n,r))return F;if(typeof r<"u"){e.inActiveRecording&&l(e.context,this,r);let s=n;for(;s!==null&&typeof s<"u";){let u=Object.getOwnPropertyDescriptor(s,r);if(typeof u<"u"&&typeof u.get<"u")return u.get.bind(this.meta.proxy)();s=Object.getPrototypeOf(s)}return n[r]}}function Ct(n,r,s){if(r===f)throw new Error("Cannot set the dedicated meta property '"+f+"'");if(this.meta.forwardTo!==null){let m=this.meta.forwardTo[f].handler;return m.set.apply(m,[m.target,r,s])}if(T&&!T(this,n,r))return;let u=n[r];if(r in n&&xe(u,s))return!0;let g=!(r in n);n[r]=s;let h=n[r];return(h===s||Number.isNaN(h)&&Number.isNaN(s))&&(b(this,r),g&&p(this,r)),Pe(this,r,s,u),!(h!==s&&!(Number.isNaN(h)&&Number.isNaN(s)))}function Ot(n,r){if(this.meta.forwardTo!==null){let s=this.meta.forwardTo[f].handler;return s.deleteProperty.apply(s,[s.target,r]),!0}if(!(T&&!T(this,n,r)))if(r in n){let s=n[r];return delete n[r],r in n||(b(this,r),p(this,r),Re(this,r,s)),!(r in n)}else return!0}function At(n,r){if(this.meta.forwardTo!==null){let s=this.meta.forwardTo[f].handler;return s.ownKeys.apply(s,[s.target,r])}return S&&!S(this,n,r)?F:(e.inActiveRecording&&y(e.context,this),Object.keys(n))}function Nt(n,r){if(this.meta.forwardTo!==null){let s=this.meta.forwardTo[f].handler;return s.has.apply(s,[s.target,r])}return S&&!S(this,n,r)?F:(e.inActiveRecording&&y(e.context,this),r in n)}function xt(n,r,s){if(this.meta.forwardTo!==null){let u=this.meta.forwardTo[f].handler;return u.defineProperty.apply(u,[u.target,r])}if(!(T&&!T(this,n,r)))return p(this,"define property"),Reflect.defineProperty(n,r,s)}function St(n,r){if(this.meta.forwardTo!==null){let s=this.meta.forwardTo[f].handler;return s.getOwnPropertyDescriptor.apply(s,[s.target,r])}return S&&!S(this,n,r)?F:(e.inActiveRecording&&y(e.context,this),Object.getOwnPropertyDescriptor(n,r))}function D(n){return n!==null&&typeof n=="object"&&typeof n[f]=="object"&&n[f].world===t}function te(n,r){if(typeof n>"u"&&(n={}),typeof r>"u"&&(r=null),D(n))throw new Error("Cannot observe an already observed object!");let s;n instanceof Array?s={_arrayObservers:null,get:ft,set:pt,deleteProperty:gt,ownKeys:mt,has:yt,defineProperty:vt,getOwnPropertyDescriptor:bt}:s={get:wt,set:Ct,deleteProperty:Ot,ownKeys:At,has:Nt,defineProperty:xt,getOwnPropertyDescriptor:St};let u=new Proxy(n,s);if(s.target=n,s.proxy=u,s.meta={world:t,id:"not yet",buildId:r,forwardTo:null,target:n,handler:s,proxy:u,isBeingRebuilt:!1},e.inRepeater!==null){const g=e.inRepeater;if(r!==null){if(g.newBuildIdObjectMap||(g.newBuildIdObjectMap={}),g.buildIdObjectMap&&typeof g.buildIdObjectMap[r]<"u"){s.meta.isBeingRebuilt=!0;let h=g.buildIdObjectMap[r];h[f].forwardTo=u,g.options.rebuildShapeAnalysis&&(s.meta.copyTo=h),s.meta.id="temp-"+e.nextTempObjectId++,g.newBuildIdObjectMap[r]=h,u=h,s=u[f].handler,Te(h[f].handler)}else s.meta.id=e.nextObjectId++,s.meta.pendingOnEstablishCall=!0,g.newBuildIdObjectMap[r]=u,ie(s);g.options.rebuildShapeAnalysis&&(g.newIdObjectShapeMap||(g.newIdObjectShapeMap={}),g.newIdObjectShapeMap[s.meta.id]=u)}else g.options.rebuildShapeAnalysis?(s.meta.id=e.nextObjectId++,s.meta.pendingCreationEvent=!0,s.meta.pendingOnEstablishCall=!0,g.newIdObjectShapeMap||(g.newIdObjectShapeMap={}),g.newIdObjectShapeMap[s.meta.id]=u):(s.meta.id=e.nextObjectId++,ie(s))}else s.meta.id=e.nextObjectId++,ie(s);return u}function Se(n,r){if(D(n)||typeof n!="object")return n;let s;if(r){const u=n instanceof Array?[]:{};for(let g in n)u[g]=Se(n[g],r);s=u}else s=n;return te(s)}function X(n,r,s,u){P&&_(n,{type:"splice",index:r,removed:s,added:u})}function Pt(n,r,s,u){P&&_(n,{type:"splice",index:r,removed:[u],added:[s]})}function Pe(n,r,s,u){P&&_(n,{type:"set",property:r,newValue:s,oldValue:u})}function Re(n,r,s){P&&_(n,{type:"delete",property:r,deletedValue:s})}function Te(n){P&&_(n,{type:"reCreate"})}function ie(n){P&&_(n,{type:"create"})}function Ie(n){P&&_(n,{type:"dispose"})}function _(n,r){r.object=n.meta.proxy,r.objectId=n.meta.id,!(!st&&n.meta.isBeingRebuilt)&&(de&&de(r),Ae&&typeof n.target.onChange=="function"&&n.target.onChange(r))}function he(){if(e.postponeInvalidation==0){for(e.postponeRefreshRepeaters++;e.nextObserverToInvalidate!==null;){let n=e.nextObserverToInvalidate;e.nextObserverToInvalidate=null;const r=n.nextToNotify;r?(n.nextToNotify=null,e.nextObserverToInvalidate=r):e.lastObserverToInvalidate=null,n.invalidateAction(),K(n)}e.postponeRefreshRepeaters--,Me()}}function Rt(n,r,s){let u=!1,g=e.context;for(;g;){if(g===n){u=!0;break}g=g.parent}u||(n.invalidatedInContext=e.context,n.invalidatedByKey=s,n.invalidatedByObject=r,n.dispose(),e.postponeInvalidation>0?($(n),e.lastObserverToInvalidate!==null?e.lastObserverToInvalidate.nextToNotify=n:e.nextObserverToInvalidate=n,e.lastObserverToInvalidate=n):n.invalidateAction(s))}function Tt(n,r){return{createdCount:0,createdTemporaryCount:0,removedCount:0,isRecording:!0,type:"invalidator",id:e.observerId++,description:n,sources:[],nextToNotify:null,invalidateAction:r,dispose:function(){C(this)},record:function(s){if(e.context==this||this.isRemoved)return s();const u=Q(this),g=s();return ee(u),g},returnValue:null,causalityString(){return"<invalidator>"+this.invalidateAction}}}function It(){let n,r,s=null;if(arguments.length>2)s=arguments[0],n=arguments[1],r=arguments[2];else{if(rt)throw new Error("Missing description for 'invalidateOnChange'");n=arguments[0],r=arguments[1]}const u=a(s,r);return Q(u),u.returnValue=n(u),ee(u),u}function Et(n,r,s,u,g){return{createdCount:0,createdTemporaryCount:0,removedCount:0,isRecording:!0,type:"repeater",id:e.observerId++,firstTime:!0,description:n,sources:[],nextToNotify:null,repeaterAction:Mt(r,u),nonRecordedAction:s,options:u||{},finishRebuilding(){g(this)},priority(){return typeof this.options.priority<"u"?this.options.priority:0},causalityString(){const h=this.invalidatedInContext,m=this.invalidatedByObject;if(!m)return"Repeater started: "+this.description;const O=this.invalidatedByKey,A=h?h.description:"outside repeater/invalidator",M="  "+m.toString()+"."+O,ne=""+this.description;return"("+A+")"+M+" --> "+ne},creationString(){let h="{";return h+="created: "+this.createdCount+", ",h+="createdTemporary:"+this.createdTemporaryCount+", ",h+="removed:"+this.removedCount+"}",h},sourcesString(){let h="";for(let m of this.sources){for(;m.parent;)m=m.parent;h+=m.handler.proxy.toString()+"."+m.key+`
`}return h},restart(){this.invalidateAction()},invalidateAction(){C(this),Ft(this),this.disposeChildren()},dispose(){Le(this),C(this),this.disposeChildren()},notifyDisposeToCreatedObjects(){if(this.idObjectShapeMap)for(let h in this.idObjectShapeMap){let m=this.idObjectShapeMap[h];typeof m[f].target.onDispose=="function"&&m.onDispose()}else if(this.buildIdObjectMap)for(let h in this.buildIdObjectMap){const m=this.buildIdObjectMap[h];typeof m.onDispose=="function"&&m.onDispose()}},disposeChildren(){this.children&&(this.children.forEach(h=>h.dispose()),this.children=null)},addChild(h){this.children||(this.children=[]),this.children.push(h)},nextDirty:null,previousDirty:null,lastRepeatTime:0,waitOnNonRecordedAction:0,children:null,refresh(){const h=this,m=h.options;m.onRefresh&&m.onRefresh(h),h.finishedRebuilding=!1,h.createdCount=0,h.createdTemporaryCount=0,h.removedCount=0,h.isRecording=!0;const O=Q(h);h.returnValue=h.repeaterAction(h),h.isRecording=!1,L();const{debounce:A=0,fireImmediately:M=!0}=m;if(h.nonRecordedAction!==null)A===0||this.firstTime?(M||!this.firstTime)&&h.nonRecordedAction(h.returnValue):(h.waitOnNonRecordedAction&&clearTimeout(h.waitOnNonRecordedAction),h.waitOnNonRecordedAction=setTimeout(()=>{h.nonRecordedAction(h.returnValue),h.waitOnNonRecordedAction=null},A));else if(A>0)throw new Error("Debounce has to be used together with a non-recorded action.");return g(this),this.firstTime=!1,ee(O),h}}}function Ee(n){const r=n.options.rebuildShapeAnalysis;function s(h,m){h[f].forwardTo=m,m[f].copyTo=h,m[f].pendingCreationEvent&&(delete m[f].pendingCreationEvent,h[f].pendingReCreationEvent=!0),delete m[f].pendingOnEstablishCall,delete n.newIdObjectShapeMap[m[f].id],n.newIdObjectShapeMap[h[f].id]=h}function u(h,m){if(h!==m){const O=D(m),A=D(h);if(O!==A)return;if(O&&A){if(!n.newIdObjectShapeMap[m[f].id]||h[f].forwardTo===m||m[f].buildId||h[f].buildId)return;r.allowMatch&&r.allowMatch(h,m)&&(s(h,m),g(h[f].target,m[f].target))}else g(h,m)}}function g(h,m){for(let[O,A]of r.slotsIterator(h,m,M=>D(M)&&M[f].buildId))u(O,A)}return{setAsMatch:s,matchChildrenInEquivalentSlot:g,matchInEquivalentSlot:u}}function Lt(n){if(n.finishedRebuilding)return;const r=n.options;r.onStartBuildUpdate&&r.onStartBuildUpdate();function s(u){return u instanceof Array?u.map(g=>s(g)):D(u)&&u[f].copyTo?u[f].copyTo:u}if(n.options.rebuildShapeAnalysis){const{matchChildrenInEquivalentSlot:u,matchInEquivalentSlot:g}=Ee(n),h=n.options.rebuildShapeAnalysis;if(n.establishedRoot instanceof Array||h.shapeRoot()instanceof Array){let m=n.establishedRoot,O=h.shapeRoot();m instanceof Array||(m=[m]),O instanceof Array||(O=[O]),u(m,O)}else g(n.establishedShapeRoot,h.shapeRoot());for(let m in n.newIdObjectShapeMap){const O=n.newIdObjectShapeMap[m],A=O[f].forwardTo;A&&u(O[f].target,A[f].target)}for(let m in n.newIdObjectShapeMap){let O=n.newIdObjectShapeMap[m],A;const M=O[f].forwardTo;if(M?A=M[f].target:A=O[f].target,n.options.rebuildShapeAnalysis.translateReferences)n.options.rebuildShapeAnalysis.translateReferences(A,s);else for(let ne in A)A[ne]=s(A[ne])}n.establishedShapeRoot=s(n.options.rebuildShapeAnalysis.shapeRoot());for(let m in n.newIdObjectShapeMap){let O=n.newIdObjectShapeMap[m];const A=O[f].forwardTo;A?(A[f].copyTo=null,O[f].forwardTo=null,fe(O,A[f].target),O[f].pendingCreationEvent&&(delete O[f].pendingCreationEvent,Te(O[f].handler))):(O[f].pendingCreationEvent&&(delete O[f].pendingCreationEvent,ie(O[f].handler)),ce(O))}if(n.idObjectShapeMap){for(let m in n.idObjectShapeMap)if(typeof n.newIdObjectShapeMap[m]>"u"){const O=n.idObjectShapeMap[m],A=O[f].target;Ie(O[f].handler),typeof A.onDispose=="function"&&O.onDispose()}}}else{for(let u in n.newBuildIdObjectMap){let g=n.newBuildIdObjectMap[u];const h=g[f].forwardTo;h!==null?(g[f].forwardTo=null,h[f].isBeingRebuilt=!1,fe(g,h[f].target)):ce(g)}if(n.buildIdObjectMap){for(let u in n.buildIdObjectMap)if(typeof n.newBuildIdObjectMap[u]>"u"){const g=n.buildIdObjectMap[u],h=g[f].target;Ie(g[f].handler),typeof h.onDispose=="function"&&h.onDispose()}}}n.buildIdObjectMap=n.newBuildIdObjectMap,n.newBuildIdObjectMap={},n.idObjectShapeMap=n.newIdObjectShapeMap,n.newIdObjectShapeMap={},n.finishedRebuilding=!0,r.onEndBuildUpdate&&r.onEndBuildUpdate()}function ce(n){const r=n[f];(r.pendingOnEstablishCall||!r.established)&&(delete r.pendingOnEstablishCall,r.established=!0,typeof r.target.onEstablish=="function"&&n.onEstablish())}function Dt(n){const r=n[f].forwardTo;if(r!==null){if(e.inRepeater){const s=e.context;if(s.options.rebuildShapeAnalysis){const{matchChildrenInEquivalentSlot:u}=Ee(s);u(n[f].target,r[f].target)}}n[f].forwardTo=null,r[f].isBeingRebuilt=!1,fe(n,r[f].target)}else ce(n);return n}function Mt(n,{throttle:r=0}){return r>0?function(s){let u=Date.now();const g=u-s.lastRepeatTime;if(r>g){const h=r-g;setTimeout(()=>{s.restart()},h)}else return s.lastRepeatTime=u,n()}:n}function Bt(){let n="",r,s=null,u;const g=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);if(typeof g[0]=="string")n=g.shift();else if(nt)throw new Error("Every repeater has to be given a name as first argument. Note: This requirement can be removed in the configuration.");if(typeof g[0]=="function"&&(r=g.shift()),(typeof g[0]=="function"||g[0]===null)&&(s=g.shift()),typeof g[0]=="object"&&(u=g.shift()),u||(u={}),ot&&e.inActiveRecording){let m=e.context.description;!m&&e.context.parent&&(m=e.context.parent.description),m||(m="unnamed"),i.traceWarnings&&console.warn(Error(`repeater ${n||"unnamed"} inside active recording ${m}`))}const h=o(n,r,s,u,Lt);return e.context&&e.context.type==="repeater"&&(u.dependentOnParent||i.alwaysDependOnParentRepeater)&&e.context.addChild(h),h.refresh()}function Ft(n){n.dispose();const r=n.priority();$(r);const s=e.dirtyRepeaters[r];s.last===null?(s.last=n,s.first=n):(s.last.nextDirty=n,n.previousDirty=s.last,s.last=n),Me()}function kt(){e.observerId=0,e.dirtyRepeaters.map(n=>{n.first=null,n.last=null})}function Le(n){const r=n.priority(),s=e.dirtyRepeaters[r];s.last===n&&(s.last=n.previousDirty),s.first===n&&(s.first=n.nextDirty),n.nextDirty&&(n.nextDirty.previousDirty=n.previousDirty),n.previousDirty&&(n.previousDirty.nextDirty=n.nextDirty),n.nextDirty=null,n.previousDirty=null}function De(n=0){const r=e.dirtyRepeaters;let s=n;for(;s<r.length;){if(r[s].first!==null)return!0;s++}return!1}function jt(){const n=e.dirtyRepeaters;let r=e.revalidationLevelLock+1;for(;r<n.length;){if(n[r].first)return n[r].first;r++}for(e.revalidationLevelLock=-1,r=e.revalidationLevelLock+1;r<n.length;){if(n[r].first)return n[r].first;r++}return null}function Me(){if(e.postponeRefreshRepeaters===0&&!e.refreshingAllDirtyRepeaters&&De()){for(e.refreshingAllDirtyRepeaters=!0;De();){let n=jt();n.refresh(),Le(n),K(n.priority())}e.refreshingAllDirtyRepeaters=!1}}function Wt(n,r){e.recordingPaused++,L(),N.log(n,r),e.recordingPaused--,L()}function zt(n,r){e.recordingPaused++,L(),N.group(n,r),e.recordingPaused--,L()}function qt(){N.groupEnd()}function Xt(n,r){e.recordingPaused++,L();let s=N.logToString(n,r);return e.recordingPaused--,L(),s}return t}let pe={};function Qt(i){i||(i={}),i={...Yt,...i};const e=Ut(i);return typeof pe[e]>"u"&&(pe[e]=Jt(i)),pe[e]}var ei=Object.defineProperty,ti=(i,e,t)=>e in i?ei(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ke=(i,e,t)=>ti(i,typeof e!="symbol"?e+"":e,t);function je(i,e){e.nextSibling?e.parentNode.insertBefore(i,e.nextSibling):e.parentNode.appendChild(i)}function we(i){if(!i.stringsAndNumbers)return i;if(i.stringsAndNumbers.length&&(i.key=i.stringsAndNumbers.pop()),i.stringsAndNumbers.length)throw new Error("Found too many loose strings in flow parameters");return delete i.stringsAndNumbers,i}function ii(i){if(!i.stringsAndNumbers)return i;if(i.stringsAndNumbers.length&&(i.text=i.stringsAndNumbers.pop()),i.stringsAndNumbers.length&&(i.key=i.stringsAndNumbers.pop()),i.stringsAndNumbers.length)throw new Error("Found too many loose strings in flow parameters");return delete i.stringsAndNumbers,i}function le(i){if(!(i instanceof Array))throw new Error("readFlowProperties expects an array");if(i[0]!==null&&typeof i[0]=="object"&&!(i[0]instanceof Array)&&!J(i[0])&&typeof i[1]>"u")return i[0];let e={};for(;i.length>0;){if(typeof i[0]=="function"&&(e.functions||(e.functions=[]),e.functions.push(i.shift())),(typeof i[0]=="string"||typeof i[0]=="number")&&!i[0].causality&&(e.stringsAndNumbers||(e.stringsAndNumbers=[]),e.stringsAndNumbers.push(i.shift())),!i[0]){i.shift();continue}if(i[0]===!0)throw new Error("Could not make sense of flow parameter 'true'");if(typeof i[0]=="object"&&!i[0].causality)if(i[0]instanceof Array){e.children||(e.children=[]);for(let t of i.shift())e.children.push(t)}else Object.assign(e,i.shift());typeof i[0]=="object"&&i[0].causality&&(e.children||(e.children=[]),e.children.push(i.shift()))}return e}let V=[];function Ue(){return V.length?V[V.length-1]:null}function Ve(){const i=Ue();return i?i.target:null}const me=console.log,He=Qt({useNonObservablesAsValues:!0,warnOnNestedRepeater:!1,emitReBuildEvents:!0,priorityLevels:3,onFinishedPriorityLevel:ai}),{transaction:ni,observable:ye,deeplyObservable:ri,isObservable:J,repeat:W,finalize:Ce,withoutRecording:G,sameAsPreviousDeep:Fi,workOnPriorityLevel:$e,invalidateOnChange:Ke,postponeInvalidations:ki,continueInvalidations:ji,state:oi}=He,Ge=ri,z={warnWhenNoKey:!1,traceReactivity:!1,traceAnimation:!1,traceWarnings:!1,autoAssignProperties:!1,defaultTransitionAnimations:null,onFinishReBuildingFlowCallbacks:[],onFinishReBuildingDOMCallbacks:[]};function si(i){Object.assign(z,i),R=z.traceReactivity,Oe=z.traceAnimation,E=z.traceWarnings}let R=!1,Oe=!1,E=!1;const Ze=Ge({on:!1});window.activeTrace=Ze;W(()=>{Ze.on});window.components={};window.idToComponent={};window.world=He;window.model=Ge;function ai(i,e){R&&me("<<<finished priority: "+i+">>>"),i===1&&e&&z.onFinishReBuildingFlowCallbacks.forEach(t=>t()),i===2&&z.onFinishReBuildingDOMCallbacks.forEach(t=>t())}class B{constructor(...e){ke(this,"theme"),ke(this,"target");let t=we(le(e));t.build&&(t.buildFunction=t.build,delete t.build),this._=null,this.key||(this.key=t.key?t.key:null),delete t.key,z.autoAssignProperties&&Object.assign(this,t),this.creator=Ue(),this.inheritFromCreator();let o=ye(this,this.key);return o.setProperties(t),o._=o.toString(),z.warnWhenNoKey&&o.key===null&&o.creator&&E&&console.warn("Component "+o.toString()+" with no key, add key for better performance."),o}get id(){return this.causality.id}get get(){return this.causality.target}get unobservable(){return this.causality.unobservable||(this.causality.unobservable=this.initialUnobservables()),this.causality.unobservable}initialUnobservables(){return{}}setTheme(e){this.theme=e}setTarget(e){this.target=e}setProperties(){}setState(){}ensure(){}onDidDisplayFirstFrame(){}disposeState(){}inheritFromCreator(){this.creator&&(this.setTarget(this.creator.target),this.setTheme(this.creator.theme))}inherit(e){return this.inheritCached(e)}inheritCached(e){const t=this.getContext();return typeof t[e]>"u"&&Ke(()=>{t[e]=this.inheritUncached(e),G(()=>{})},()=>{delete t[e]}),t[e]}inheritUncached(e){const t=this.getContext();if(typeof t[e]<"u")return t[e];if(this.equivalentCreator)return this.equivalentCreator.inheritUncached(e);if(this.parentPrimitive)return this.parentPrimitive.inheritUncached(e);if(this.creator)return this.creator.inheritUncached(e);E&&console.warn("Could not find inherited property: "+e)}inheritFromEquivalentCreator(e){const t=this[e];return typeof t<"u"?t:this.equivalentCreator?this.equivalentCreator.inheritFromEquivalentCreator(e):null}getContext(){return this}build(e){if(this.buildFunction)return this.buildFunction(this);throw new Error("Not implemented yet")}derrive(e){this.derriveRepeaters||(this.derriveRepeaters=[]),this.derriveRepeaters.push(W(e))}derriveAtBuild(e){this.derriveRepeaters||(this.derriveRepeaters=[]),this.derriveRepeaters.push(W(e,{priority:1}))}ensureEstablished(){this.unobservable.established||this.onEstablish()}onEstablish(){this.causality.established=!0,this.unobservable.established=!0,window.components[this.toString()]=this,window.idToComponent[this.id]=this,V.push(this),this.setState(),V.pop(),this.startGeneralEnsure(),R&&me("Established:"+this.toString())}startGeneralEnsure(){Object.getPrototypeOf(this).hasOwnProperty("ensure")&&(this.generalEnsureRepeater||(this.generalEnsureRepeater=W(this.toString()+".generalRepeater",t=>{this.ensure()})))}onRemoveFromFlowTarget(){this.onClose&&this.onClose()}onDispose(){delete window.components[this.toString()],delete window.idToComponent[this.id],R&&me("Disposed:"+this.toString()),this.buildRepeater&&(this.buildRepeater.notifyDisposeToCreatedObjects(),this.buildRepeater.dispose(),this.buildRepeater.repeaterAction=()=>{}),this.derriveRepeaters&&this.derriveRepeaters.map(e=>e.dispose()),this.disposeState()}onVisibilityWillChange(e){}className(){let e;return G(()=>{e=this.constructor.name}),e}toString(){let e;G(()=>{e=this.classNameOverride});let t=e||this.className();return t==="Flow"&&this.description&&(t=this.description),t+":"+this.causality.id+this.buildUniqueName()}uniqueName(){let e;return G(()=>{e=(this.key?this.key+":":"")+this.causality.id}),e}buildUniqueName(){let e;return G(()=>{e=this.key?this.key:null}),e?"("+e+")":""}findKey(e){return this.key===e?this:this.findChild(e)}findChild(e){const t=this.getPrimitive();if(t instanceof Array){for(let o of t){const a=o.findKey();if(a)return a}return null}else return t.findKey(e)}getChild(e){if(typeof e=="string"){const t=e;return typeof this.buildRepeater.buildIdObjectMap[t]>"u"?null:this.buildRepeater.buildIdObjectMap[t]}else{const t=e,o=this.getChild(t.shift());return t.length===0?o:o.getChild(t)}}getPath(){const e=this.key?this.key:"<no-tag>";let t;return this.creator?(t=this.creator.getPath(),t.push(e),t):[]}ensureBuiltRecursive(e,t){return t&&this.parentPrimitive!==t&&(this.parentPrimitive&&E&&console.warn("Changed parent primitive for "+this.toString()+":"+this.parentPrimitive.toString()+" --> "+t.toString()),this.parentPrimitive=t),$e(1,()=>this.getPrimitive().ensureBuiltRecursive(e,t)),this.getPrimitive(t)}getPrimitive(e){e&&this.parentPrimitive!==e&&(this.parentPrimitive&&E&&console.warn("Changed parent primitive for "+this.toString()+":"+this.parentPrimitive.toString()+" --> "+e.toString()),this.parentPrimitive=e);const t=this;return this.toString(),Ce(t),t.buildRepeater||(t.buildRepeater=W(this.toString()+".buildRepeater",o=>{if(R&&console.group(o.causalityString()),V.push(t),t.newBuild=t.build(o),o.finishRebuilding(),t.newBuild=o.establishedShapeRoot,t.newBuild!==null){if(t.newBuild instanceof Array)for(let a of t.newBuild)a.equivalentCreator=t;else t.newBuild.equivalentCreator=t;t.equivalentChild=t.newBuild}V.pop(),t.newBuild?t.newBuild instanceof Array?t.primitive=t.newBuild.map(a=>a.getPrimitive(this.parentPrimitive)).reduce((a,d)=>{d instanceof Array?d.forEach(w=>a.push(w)):a.push(d)},[]):t.primitive=t.newBuild.getPrimitive(this.parentPrimitive):t.primitive=null,R&&console.groupEnd()},{priority:1,rebuildShapeAnalysis:li(t)})),t.primitive}*iterateChildren(){if(this.children instanceof Array)for(let e of this.children)e instanceof B&&e!==null&&(yield e);else this.children instanceof B&&this.children!==null&&(yield this.children)}dimensions(e){!this.key&&E&&console.warn("It is considered unsafe to use dimensions on a flow without a key. The reason is that a call to dimensions from a parent build function will finalize the flow early, and without a key, causality cannot send proper onEstablish event to your flow component before it is built");const t=this.getPrimitive();if(t instanceof Array)throw new Error("Dimensions not supported for fragmented components.");return t?t.dimensions(e):null}getEquivalentRoot(){return this.equivalentCreator?this.equivalentCreator.getEquivalentRoot():this}show(e){return e?this:null}}function li(i){return{allowMatch:(e,t)=>e instanceof B&&t instanceof B&&(!t.tagName||t.tagName===e.tagName)&&t.className()===e.className()&&t.classNameOverride===e.classNameOverride,shapeRoot:()=>i.newBuild,slotsIterator:function*(e,t,o,a=!1){if(e instanceof Array&&t instanceof Array){let d=0,w=0;for(;d<t.length;){for(;o(t[d])&&d<t.length;)d++;for(;o(e[w])&&w<e.length;)w++;const y=e[w],l=t[d];J(l)&&J(y)&&(yield[y,l]),d++,w++}}else if(e instanceof B&&t instanceof B){a&&(yield[e,t]);for(let d in t)if(d==="children")yield*this.slotsIterator(e[d],t[d],o,!0);else{const w=e[d],y=t[d];J(y)&&J(w)&&(yield[w,y])}}},translateReferences:(e,t)=>{for(let a in e)e[a]=t(e[a]);const o=e.children;if(o instanceof Array){let a=0;for(;a<o.length;)o[a]=t(o[a]),a++}else o instanceof B&&(e.children=t(o))}}}class di extends B{findKey(e){return this.key===e?this:this.findChild(e)}findChild(e){if(this.children){for(let t of this.children)if(t!==null){let o=t.findKey(e);if(o!==null)return o}}return null}getPrimitive(e){return e&&this.parentPrimitive!==e&&(this.parentPrimitive&&E&&console.warn("Changed parent primitive for "+this.toString()+":"+this.parentPrimitive.toString()+" --> "+e.toString()),this.parentPrimitive=e),this}ensureBuiltRecursive(e,t){if(this.toString(),e&&(this.visibleOnTarget=e),t&&this.parentPrimitive!==t){if(this.parentPrimitive&&(E&&console.warn("Changed parent primitive for "+this.toString()+":"+this.parentPrimitive.toString()+" --> "+t.toString()),t===this))throw new Error("What the fuck just happened. ");this.parentPrimitive=t}return Ce(this),this.expandRepeater||(this.expandRepeater=W(this.toString()+".expandRepeater",o=>{R&&console.group(o.causalityString()),R&&console.log([...oi.workOnPriorityLevel]),this.parentPrimitive&&(this.parentPrimitive.childPrimitives&&this.parentPrimitive.childPrimitives.includes(this)?this.visibleOnTarget=this.parentPrimitive.visibleOnTarget:(this.visibleOnTarget=null,this.previousParentPrimitive=this.parentPrimitive,this.parentPrimitive=null));let a=this.equivalentCreator;for(;a;)a.visibleOnTarget===this.visibleOnTarget?a=null:(this.parentPrimitive&&this.parentPrimitive!==a.parentPrimitive&&(this.parentPrimitive&&E&&console.warn("Changed parent primitive for "+this.toString()+":"+this.parentPrimitive.toString()+" --> "+t.toString()),a.parentPrimitive=this.parentPrimitive),a.parentPrimitive=this.parentPrimitive,a.visibleOnTarget=this.visibleOnTarget,a.isVisible=!!this.visibleOnTarget,a.onVisibilityWillChange(a.isVisible),a=a.equivalentCreator);this.childPrimitives=this.getPrimitiveChildren();for(let d of this.childPrimitives)d.ensureBuiltRecursive(e,this);R&&console.groupEnd()},{priority:1})),this}onVisibilityWillChange(){}*iteratePrimitiveChildren(){for(let e of this.iterateChildren()){let t=e.getPrimitive(this);if(t instanceof Array)for(let o of t)yield o;else t&&(yield t)}}getChildren(){return[...this.iterateChildren()]}getPrimitiveChildren(){return[...this.iteratePrimitiveChildren()]}inheritAnimation(){let e=this.inheritFromEquivalentCreator("animate");return!e&&this.parentPrimitive&&(e=this.parentPrimitive.inheritFromEquivalentCreator("animateChildren")),!e&&this.previousParentPrimitive&&(e=this.previousParentPrimitive.inheritFromEquivalentCreator("animateChildren")),e===!0&&(e=this.getStandardAnimation()),e}getStandardAnimation(){throw new Error("Not implemented yet")}get animation(){return this.cachedAnimation||Ke(()=>{this.cachedAnimation=this.inheritAnimation()},()=>{delete this.cachedAnimation}),this.cachedAnimation}}class ui{dispose(){}setContent(e){if(this.flow=e,e.target=this,e.ensureEstablished(),$e(1,()=>this.flow.ensureBuiltRecursive(this)),e.getPrimitive()instanceof Array)throw new Error("Cannot have fragments on the top level");this.ensureContentInPlace()}ensureContentInPlace(){throw new Error("Not implemented yet!")}create(...e){throw readFlowProperties(e),new Error("Not implemented yet!")}}var hi=Object.defineProperty,ci=(i,e,t)=>e in i?hi(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,q=(i,e,t)=>ci(i,typeof e!="symbol"?e+"":e,t);function Ye(i){const e={};return i&&(pi.forEach(t=>{typeof i[t.camelCase]<"u"&&(e[t.lowerCase]=i[t.camelCase],delete i[t.camelCase])}),mi.forEach(t=>{typeof i[t.camelCase]<"u"&&(e[t.lowerCase]=i[t.camelCase],delete i[t.camelCase])}),i.className&&(e.class=i.className),i.attributes=e),e}const fi=["onAuxClick","onBeforeMatch","onBlur","onCancel","onCanPlay","onCanPlaythrough","onChange","onClick","onClose","onContextLost","onContextMenu","onContextRestored","onCopy","onCueChange","onCut","onDblClick","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDragStart","onDrop","onDurationChange","onEmptied","onEnded","onError","onFocus","onFormData","onInput","onInvalid","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadedData","onLoadedMetaData","onLoadStart","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPaste","onPause","onPlay","onPlaying","onProgress","onRateChange","onReset","onResize","onScroll","onSecurityPolicyViolation","onSeeked","onSeeking","onSelect","onSlotChange","onStalled","onSubmit","onSuspend","onTimeUpdate","onToggle","onVolumeChange","onWaiting","onWheel"],pi=fi.map(i=>({camelCase:i,lowerCase:i.toLowerCase()})),gi=["accessKey","autoCapitalize","autoFocus","contentEditable","dir","draggable","enterKeyHint","hidden","inert","inputmode","is","itemId","itemProp","itemRef","itemScope","itemType","lang","nonce","spellCheck","style","tabIndex","title","translate"],mi=gi.map(i=>({camelCase:i,lowerCase:i.toLowerCase()})),yi=["order","flexGrow","flexShrink","flexBasis","flex","alignSelf"];yi.map(i=>({camelCase:i,lowerCase:i.toLowerCase()}));function vi(...i){let e=ii(le(i));const t=Ye(e);return Ve().create({type:"dom.textNode",key:e.key,attributes:t,children:e.children})}const bi=vi;function wi(...i){let e=we(le(i));const t=Ye(e);return Ve().create({type:"dom.elementNode",tagName:"div",key:e.key,classNameOverride:"div",attributes:t,children:e.children,animate:e.animate})}class Ci{acceptUnstableFoundation(e){return!1}allwaysStableFoundationEvenWhenAdded(){return!1}recordOriginalBoundsAndStyle(e){throw new Error("Not implemented yet!")}prepareForDOMBuilding(e){throw new Error("Not implemented yet!")}domJustRebuiltMeasureTargetSizes(e){throw new Error("Not implemented yet!")}emulateOriginalFootprintsAndFixateAnimatedStyle(e){throw new Error("Not implemented yet!")}emulateOriginalBounds(e){throw new Error("Not implemented yet!")}activateAnimation(e){throw new Error("Not implemented yet!")}setupAnimationCleanup(e){throw new Error("Not implemented yet!")}}let k=1;const se=["fontSize","lineHeight","margin","padding","color"];class Je extends Ci{constructor(){super(...arguments),q(this,"animateLeaderWidth",!0),q(this,"animateLeaderHeight",!0),q(this,"animatedProperties",[{compound:"margin",partial:["marginBottom","marginBottom","marginLeft","marginRight"]},{compound:"padding",partial:["paddingTop","paddingBottom","paddingLeft","paddingRight"]},"opacity","color"]),q(this,"typicalAnimatedProperties",["opacity","display","position","transition","transform","width","height","maxWidth","maxHeight","margin","marginTop","padding","paddingTop"])}defaultTransition(){return`all ${k}s ease-in-out, opacity ${k}s cubic-bezier(1, 0, 0.42, 0.93)`}addedTransition(){return`transform ${k}s ease-in-out, opacity ${k}s cubic-bezier(1, 0, 0.42, 0.93)`}leaderTransition(){return`width ${k}s ease-in-out, height ${k}s ease-in-out`}removeTransition(){return`all ${k}s ease-in-out, opacity ${k}s cubic-bezier(.08,.72,.15,1.01)`}getDimensionsIncludingMargin(e){const t=e.getBoundingClientRect(),o=getComputedStyle(e);return this.calculateDimensionsIncludingMargin(t,o)}calculateDimensionsIncludingMargin(e,t){const o={marginTop:parseInt(t.marginTop,10),marginBottom:parseInt(t.marginBottom,10),marginLeft:parseInt(t.marginLeft,10),marginRight:parseInt(t.marginRight,10),width:e.width,height:e.height};return o.widthWithoutMargin=o.width,o.heightWithoutMargin=o.height,o.heightIncludingMargin=o.height+o.marginTop+o.marginBottom,o.widthIncludingMargin=o.width+o.marginLeft+o.marginRight,o}fixateLeaderOrTrailer(e){const t=e.getBoundingClientRect();e.style.width=t.width+"px",e.style.height=t.height+"px"}repurposeOwnLeaderAsTrailer(e){const t=e.leader;delete e.leader,t.removeEventListener("transitionend",t.hasCleanupEventListener),delete t.hasCleanupEventListener,e.trailer&&(delete e.trailer.owner,delete e.trailer);const o=t;if(o.owner!==e)throw new Error("unexpected owner");return e.trailer=o,o}repurposeOwnTrailerAsLeader(e){const t=e.trailer;delete e.trailer,t.removeEventListener("transitionend",t.hasCleanupEventListener),delete t.hasCleanupEventListener,e.leader&&(delete e.leader.owner,delete e.leader);const o=t;if(o.owner!==e)throw new Error("unexpected owner");return e.leader=o,o}repurposeTrailerAsLeader(e,t){e.owner&&(delete e.owner.trailer,delete e.owner),e.removeEventListener("transitionend",e.hasCleanupEventListener),delete e.hasCleanupEventListener,t.leader&&(delete t.leader.owner,delete t.leader);const o=e;return t.leader=o,o.owner=t,o}createNewTrailer(e){const t=this.createNewTrailerOrLeader();if(t.id="trailer",e.trailer)throw new Error("should not have a trailer!");return e.trailer=t,t.owner=e,t}createNewLeader(e){const t=this.createNewTrailerOrLeader();if(t.id="leader",e.leader)throw new Error("should not have a leader!");return e.leader=t,t.owner=e,t}createNewTrailerOrLeader(e){const t=document.createElement("div");return t.isControlledByAnimation=!0,t.style.position="relative",t.style.overflow="visible",t}hide(e){e.style.display="none"}show(e){e.style.display=""}changesChain(e){let t="";t+=e.domNode.ongoingAnimation?"[ongoing] ":"";let o=e.changes;for(;o;)t+=(t===""?"":", ")+o.type,o=o.previous;return t}startAnimationChain(e){e.ongoingAnimation=this,xi()}endAnimationChain(e){if(e.ongoingAnimation){if(delete e.isControlledByAnimation,delete e.ongoingAnimation,e.changes){e.changes.finished=!0;const t=e.equivalentCreator;t.changes=null,e.changes=null}requestAnimationFrame(()=>{Si()})}}recordOriginalBoundsAndStyle(e){const t=e.domNode;t.changes.originalBounds=t.getBoundingClientRect(),t.changes.originalStyle={...t.style},t.changes.computedOriginalStyle={...getComputedStyle(t)},t.changes.originalDimensions=this.calculateDimensionsIncludingMargin(t.changes.originalBounds,t.changes.computedOriginalStyle),console.groupEnd()}prepareForDOMBuilding(e){const t=e.domNode;switch(e.changes.type){case v.moved:case v.removed:delete t.isControlledByAnimation,this.addTrailersForMovedAndRemovedBeforeDomBuilding(t),t.trailer.canBeRepurposed=!0;break}switch(e.changes.type){case v.added:case v.moved:delete t.isControlledByAnimation,this.neutralizeTransformationsAndPosition(e,t),e.synchronizeDomNodeStyle(se);break}e.changes.type===v.resident&&t.leader&&(t.isControlledByAnimation=!0),console.groupEnd()}addTrailersForMovedAndRemovedBeforeDomBuilding(e){let t;e.leader&&e.leader===e.parentNode&&e.parentNode.isControlledByAnimation?(t=this.repurposeOwnLeaderAsTrailer(e),this.fixateLeaderOrTrailer(t)):(t=this.createNewTrailer(e),t.style.width=e.changes.originalDimensions.widthIncludingMargin+"px",t.style.height=e.changes.originalDimensions.heightIncludingMargin+"px",je(t,e)),this.hide(t)}neutralizeTransformationsAndPosition(e){e.synchronizeDomNodeStyle(["position","transform","width","height"])}domJustRebuiltMeasureTargetSizes(e){const t=e.domNode;switch(e.changes.type){case v.added:if(e.changes.previous&&e.changes.previous.type===v.removed){const o=e.changes.previous;t.changes.targetBounds=o.originalBounds,t.changes.targetStyle=o.originalStyle,t.changes.computedTargetStyle=o.computedOriginalStyle,t.changes.targetDimensions=o.originalDimensions;break}case v.resident:case v.moved:t.changes.targetBounds=t.getBoundingClientRect(),t.changes.targetStyle={...t.style},t.changes.computedTargetStyle={...getComputedStyle(t)},t.changes.targetDimensions=this.calculateDimensionsIncludingMargin(t.changes.targetBounds,t.changes.computedTargetStyle)}console.groupEnd()}emulateOriginalFootprintsAndFixateAnimatedStyle(e){const t=e.domNode,o=t.trailer;switch(e.changes.type){case v.added:case v.moved:this.setupALeaderForIncomingWithOriginalFootprint(t);break}switch(e.changes.type){case v.removed:t.parentNode!==o&&o.appendChild(t),o&&this.show(o);break;case v.moved:o&&this.show(o);break}if(t.ongoingAnimation)switch(this.fixateOriginalInheritedStyles(t),e.changes.type){case v.resident:break;case v.added:this.fixateOriginalTransformAndOpacity(t);break;case v.removed:this.fixateOriginalTransformAndOpacity(t);break;case v.moved:this.fixateOriginalTransformAndOpacity(t);break}else switch(e.changes.type){case v.resident:break;case v.added:this.originalPositionForZoomIn(t);break;case v.removed:this.originalPositionForZoomOut(t);break;case v.moved:this.fixateOriginalInheritedStyles(t),this.originalPositionForMoveAndResize(t);break}console.groupEnd()}fixateOriginalInheritedStyles(e){if([v.added,v.removed,v.moved].includes(e.changes.type)){e.style.transition="";for(let t of se)e.style[t]=e.changes.computedOriginalStyle[t]}}setupALeaderForIncomingWithOriginalFootprint(e){let t=this.tryRepurposeTrailerAsLeader(e);t||(t=this.createNewLeader(e),e.leader=t,this.animateLeaderWidth&&(t.style.width="0.0001px"),this.animateLeaderHeight&&(t.style.height="0.0001px"),je(t,e)),t.appendChild(e),this.show(t)}tryRepurposeTrailerAsLeader(e){return e.trailer&&e.parentNode===e.trailer?this.repurposeOwnTrailerAsLeader(e):null}fixateOriginalTransformAndOpacity(e){Object.assign(e.style,{transform:e.changes.computedOriginalStyle.transform,opacity:e.changes.computedOriginalStyle.opacity})}originalPositionForZoomIn(e){Object.assign(e.style,{position:"absolute",transform:"matrix(0.0001, 0, 0, 0.0001, 0, 0)",width:e.changes.targetDimensions.widthWithoutMargin+"px",height:e.changes.targetDimensions.heightWithoutMargin+"px",opacity:"0.001"})}originalPositionForZoomOut(e){Object.assign(e.style,{transform:"matrix(1, 0, 0, 1, 0, 0)",position:"absolute",width:e.changes.originalDimensions.widthWithoutMargin+"px",height:e.changes.originalDimensions.heightWithoutMargin+"px",opacity:"1"})}originalPositionForMoveAndResize(e){Object.assign(e.style,{transform:"matrix(1, 0, 0, 1, 0, 0)",position:"absolute",width:e.changes.originalDimensions.widthWithoutMargin+"px",height:e.changes.originalDimensions.heightWithoutMargin+"px"})}emulateOriginalBounds(e){switch(e.domNode,this.recordBoundsInNewStructure(e.domNode),e.changes.type){case v.moved:case v.resident:this.translateToOriginalBoundsIfNeeded(e);break}console.groupEnd()}recordBoundsInNewStructure(e){e.newStructureBounds=e.getBoundingClientRect(),Qe.push(e),e.newStructureBounds}translateToOriginalBoundsIfNeeded(e){if(!Ri(e.domNode.changes.originalBounds,e.domNode.newStructureBounds)){e.outOfPosition=!0;const t=getComputedStyle(e.domNode);let o=getComputedStyle(e.domNode).transform;["none",""," "].includes(o)||(Object.assign(e.domNode.style,U(t,this.animatedProperties)),e.domNode.style.transition="",e.domNode.style.transform="",o=getComputedStyle(e.domNode).transform,this.recordBoundsInNewStructure(e.domNode)),e.animateInChanges=tt.number,this.translateFromNewToOriginalPosition(e.domNode),e.domNode.getBoundingClientRect()}}translateFromNewToOriginalPosition(e){e.style.transition="";const t=e.changes.originalBounds,o=e.newStructureBounds,a=o.left-t.left,d=o.top-t.top,w="matrix(1, 0, 0, 1, "+-a+", "+-d+")";e.style.transform=w}activateAnimation(e){const t=e.domNode,o=t.ongoingAnimation;e.changes;const a=t.trailer;if(t.leader,t.leader,t.trailer,o)switch(e.changes.type){case v.added:if(this.targetPositionForZoomIn(t),this.targetSizeForLeader(t,t.leader),a)throw new Error("Internal error, should not happen!");break;case v.resident:e.outOfPosition&&(delete e.outOfPosition,this.targetPositionForMovingInsideContainer(t));break;case v.moved:this.targetPositionForMoved(t),this.targetSizeForLeader(t,t.leader),t.trailer&&this.targetSizeForTrailer(t.trailer);break;case v.removed:this.targetPositionForZoomOut(t),this.targetSizeForTrailer(t.trailer);break}else switch(e.changes.type){case v.added:if(this.targetPositionForZoomIn(t),this.targetSizeForLeader(t,t.leader),a)throw new Error("Internal error, should not happen!");this.startAnimationChain(t);break;case v.resident:e.outOfPosition&&(this.startAnimationChain(t),delete e.outOfPosition,this.targetPositionForMovingInsideContainer(t));break;case v.moved:this.targetPositionForMoved(t),this.targetSizeForLeader(t,t.leader),t.trailer&&this.targetSizeForTrailer(t.trailer),this.startAnimationChain(t);break;case v.removed:this.targetPositionForZoomOut(t),this.targetSizeForTrailer(t.trailer),this.startAnimationChain(t);break}t.trailer,console.groupEnd()}targetSizeForLeader(e,t){t.style.transition=this.leaderTransition();const o={};this.animateLeaderHeight&&(o.height=e.changes.targetDimensions.heightIncludingMargin+"px"),this.animateLeaderWidth&&(o.width=e.changes.targetDimensions.widthIncludingMargin+"px"),Object.assign(t.style,o)}targetSizeForTrailer(e){e.style.transition=this.leaderTransition(),Object.assign(e.style,{width:"0.0001px",height:"0.0001px"})}targetPositionForZoomIn(e){e.style.transition=this.addedTransition(),Object.assign(e.style,{transform:"matrix(1, 0, 0, 1, 0, 0)",opacity:"1"})}targetPositionForMovingInsideContainer(e){e.style.transition=this.defaultTransition(e),Object.assign(e.style,{transform:"matrix(1, 0, 0, 1, 0, 0)"})}targetPositionForMoved(e){e.style.transition=this.defaultTransition(),Object.assign(e.style,{transform:"matrix(1, 0, 0, 1, 0, 0)"}),this.setInheritedTargetStyles(e)}targetPositionForZoomOut(e){e.style.transition=this.removeTransition(),Object.assign(e.style,{transform:"matrix(0.0001, 0, 0, 0.0001, 0, 0)",opacity:"0.001"})}setInheritedTargetStyles(e){for(let t of se)e.style[t]=e.changes.computedTargetStyle[t]}setupAnimationCleanup(e){const t=e.domNode;this.setupNodeAnimationCleanup(t,{purpose:"node",endingAction:o=>{const a=t.leader,d=t.trailer;if(t.equivalentCreator.synchronizeDomNodeStyle([o,"transition","transform","width","height","position","opacity",...se]),t.parentNode.isControlledByAnimation)switch(t.changes.type){case v.removed:if(d){if(t.parentNode!==d)throw new Error("Internal error: Wrong trailer!");t.equivalentCreator.synchronizeDomNodeStyle(["position","width","height","transform"]),d.removeChild(t),d.parentNode&&d.parentNode.removeChild(d),delete d.owner,t.trailer.canBeRepurposed=!0,delete t.trailer}break;case v.added:case v.moved:case v.resident:if(a){if(t.parentNode!==a)throw new Error("Internal error: Wrong leader!");t.equivalentCreator.synchronizeDomNodeStyle(["position","width","height","transform"]),a.removeChild(t),a.parentNode&&a.parentNode.replaceChild(t,a),delete a.owner,delete t.leader}d&&(delete d.owner,t.trailer.canBeRepurposed=!0,delete t.trailer);break}this.endAnimationChain(t)}}),t.trailer&&this.setupTrailerAnimationCleanup(t.trailer)}setupTrailerAnimationCleanup(e){this.setupNodeAnimationCleanup(e,{purpose:"trailer",endingProperties:["width","height"],endingAction:()=>{delete e.isControlledByAnimation,e.parentNode&&e.parentNode.removeChild(e),e.owner&&delete e.owner.trailer,delete e.owner}})}setupNodeAnimationCleanup(e,{endingProperties:t,endingAction:o,purpose:a}){if(e.hasCleanupEventListener)return;function d(w){if(w.stopPropagation(),w.preventDefault(),!e.changes||!e.changes.activated)return;const y=Ti(w.propertyName);e.changes&&""+e.changes.type,console.groupEnd(),(!t||t.includes(y))&&(o(y),e.removeEventListener("transitionend",d),delete e.hasCleanupEventListener)}e.addEventListener("transitionend",d,!0),e.hasCleanupEventListener=d}}const Oi=new Je,Ai=Oi,We=console.log;function Ni(i){for(;i.equivalentCreator;)i=i.equivalentCreator;return i}function ge(i){let e=[],t=i;for(;t;)e.unshift(t.toString()),t=t.equivalentCreator;return e.join(" | ")}const Qe=[];window.moved=Qe;class et extends di{dimensions(e){E&&console.warn("Calls to dimensions() could lead to performance issues as it forces a reflow to measure the size of a dom-node. Note that transition animations may use dimensions() for measuring the size of added nodes");let t=this.ensureDomNodeBuilt(),o;e?(o=t.parentNode===e,o||(t=t.cloneNode(!0),e.appendChild(t))):(t=t.cloneNode(!0),t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width===""&&(t.style.width="auto"),t.style.height===""&&(t.style.height="auto"),document.body.appendChild(t));const a={width:qe(t),height:ze(t),widthIncludingMargin:qe(t),heightIncludingMargin:ze(t),widthWithoutMargin:t.offsetWidth,heightWithoutMargin:t.offsetHeight};return e?o||e.removeChild(t):document.body.removeChild(t),a}getDomNode(){return this.ensureDomNodeBuilt(),this.domNode}ensureDomNodeBuilt(){return Ce(this),this.buildDOMRepeater||(this.buildDOMRepeater=W("["+ge(this)+"].buildDOMRepeater",e=>{R&&console.group(e.causalityString()),this.ensureDomNodeExists(),this.ensureDomNodeAttributesSet(),this.ensureDomNodeChildrenInPlace(),R&&console.groupEnd()},{priority:2})),this.domNode}createEmptyDomNode(){throw new Error("Not implemented yet!")}ensureDomNodeChildrenInPlace(){const e=this.domNode;if(!(e instanceof Element))return;const o=this.getPrimitiveChildren(e).map(l=>l.ensureDomNodeBuilt()).filter(l=>!!l);let a=0;for(;a<o.length;){const l=o[a];l.leader&&l.parentNode===l.leader&&l.leader.parentNode===e&&(o[a]=l.leader),l.trailer&&l.parentNode===l.trailer&&l.trailer.parentNode===e&&(o[a]=l.trailer),a++}const d=[];for(let l of e.childNodes)(l.isControlledByAnimation||o.includes(l))&&d.push(l);let w=null;d.forEach(l=>{l.anchor=w,w=l});function y(l,c,p){l.splice(l.indexOf(c)+1,0,p)}for(d.forEach(l=>{if(!o.includes(l)){let c=l.anchor;for(;!o.includes(c)&&c;)c=c.anchor;c?y(o,c,l):o.unshift(l)}}),a=e.childNodes.length-1;a>=0;){const l=e.childNodes[a];l instanceof Element&&!o.includes(l)&&e.removeChild(l),a--}for(a=0;a<o.length;){const l=o[a],c=e.childNodes[a];if(c){const p=e.childNodes[a];l!==p&&e.insertBefore(l,c)}else e.appendChild(l);a++}}getChildNodes(){return this.getPrimitiveChildren().map(e=>e.ensureDomNodeBuilt())}ensureDomNodeExists(){return this.givenDomNode?(this.domNode=this.givenDomNode,this.domNode.className=ge(this),this.domNode.equivalentCreator=this):this.createElementRepeater||(this.createElementRepeater=W(Ni(this).toString()+".createElementRepeater",e=>{R&&We(e.causalityString()),this.domNode=this.createEmptyDomNode(),this.domNode.id=ge(this),this.domNode.equivalentCreator=this;let t=this.equivalentCreator;for(;t!=null;)t.domNode=this.domNode,t=t.equivalentCreator;R&&We(this.domNode)},{priority:2})),this.domNode}ensureDomNodeAttributesSet(){throw new Error("Not implemented yet!")}synchronizeDomNodeStyle(e){throw new Error("Not implemented yet!")}getStandardAnimation(){return Ai}}let ae=0;function xi(){ae++,Oe&&E&&console.warn("Risky to use freeze "+ae)}function Si(){ae--,Oe&&E&&console.warn("Unfreeze... "+ae)}function U(i,e){const t={};return e.forEach(o=>{typeof o!="string"?(o.partial.forEach(a=>{i[a]&&(t[a]=i[a])}),i[o.compound]&&(t[o.compound]=i[o.compound])):i[o]&&(t[o]=i[o])}),t}const tt=Pi();function Pi(){return{number:0,idPrimitiveMap:{},idParentIdMap:{},globallyAdded:{},globallyRemoved:{},globallyResident:{},globallyMoved:{},globallyAddedAnimated:{},globallyRemovedAnimated:{},globallyResidentAnimated:{},globallyMovedAnimated:{},*allAnimatedFlows(){for(let i of Object.values(this.globallyAddedAnimated))yield i;for(let i of Object.values(this.globallyRemovedAnimated))yield i;for(let i of Object.values(this.globallyResidentAnimated))yield i;for(let i of Object.values(this.globallyMovedAnimated))yield i},*allAddedFlows(){for(let i of Object.values(this.globallyAdded))yield i},*allAnimatedAddedFlows(){for(let i of Object.values(this.globallyAddedAnimated))yield i},*allAnimatedRemovedFlows(){for(let i of Object.values(this.globallyRemovedAnimated))yield i},*allAnimatedResidentFlows(){for(let i of Object.values(this.globallyResidentAnimated))yield i},*allAnimatedMovedFlows(){for(let i of Object.values(this.globallyMovedAnimated))yield i},*allAnimatedMovedResidentAndRemovedFlows(){for(let i of Object.values(this.globallyResidentAnimated))yield i;for(let i of Object.values(this.globallyMovedAnimated))yield i;for(let i of Object.values(this.globallyRemovedAnimated))yield i},*allAnimatedMovedResidentFlows(){for(let i of Object.values(this.globallyResidentAnimated))yield i;for(let i of Object.values(this.globallyMovedAnimated))yield i},*allAnimatedMovedAddedAndRemovedFlows(){for(let i of Object.values(this.globallyMovedAnimated))yield i;for(let i of Object.values(this.globallyAddedAnimated))yield i;for(let i of Object.values(this.globallyRemovedAnimated))yield i}}}window.flowChanges=tt;const v={resident:"resident",added:"added",removed:"removed",moved:"moved"};function Ri(i,e){return i.top===e.top&&i.left===e.left&&i.width===e.width&&i.height===e.height}const Ti=function(){var i=/[-_]+(.)?/g;function e(t,o){return o?o.toUpperCase():""}return function(t,o){return t.replace(o?new RegExp("["+o+"]+(.)?","g"):i,e)}}();function ze(i){var e=window.getComputedStyle(i),t=parseFloat(e.marginTop)+parseFloat(e.marginBottom);return Math.ceil(i.offsetHeight+t)}function qe(i){var e=window.getComputedStyle(i),t=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return Math.ceil(i.offsetWidth+t)}const Ii=console.log;class Ei extends et{initialUnobservables(){let e=super.initialUnobservables();return e.previouslySetStyles={},e.previouslySetAttributes={},e}setProperties({children:e,tagName:t,attributes:o}){this.children=e,this.tagName=t||"div",this.attributes=o||{}}createEmptyDomNode(){return document.createElement(this.tagName)}ensureDomNodeAttributesSet(){const e=this.domNode,t=this.attributes,o={};if(this.tagName.toUpperCase()!==e.tagName)throw new Error("Too high expectations error. Cannot change tagName of existing HTML element. Please do not change the tagName property once set!");for(let a in this.unobservable.previouslySetAttributes)typeof t[a]>"u"&&(a==="style"?this.updateStyle(e,{}):e[a]="");for(let a in t){const d=t[a];a==="style"?this.updateStyle(e,d):(this.unobservable.previouslySetAttributes[a]!==d&&(a==="class"?e.setAttribute("class",d):e[a]=d),o[a]=d)}this.unobservable.previouslySetAttributes=o}updateStyle(e,t){const o=e.style,a={};for(let d in this.unobservable.previouslySetStyles)typeof t[d]>"u"&&(o[d]="");for(let d in t){const w=t[d];this.unobservable.previouslySetStyles[d]!==w&&(o[d]=w),a[d]=w}this.unobservable.previouslySetStyles=a}synchronizeDomNodeStyle(e){e||(e=Object.keys(this.unobservable.previouslySetAttributes),Ii(e)),e instanceof Array||(e=[e]);const t=this.attributes&&this.attributes.style?this.attributes.style:{},o=(a,d)=>typeof a>"u"&&typeof d>"u"||a===d;for(let a of e)if(typeof a=="string")o(t[a],this.domNode.style[a])||(this.domNode.style[a]=t[a]?t[a]:"");else{const d=t[a.compound];if(d)o(d,this.domNode.style[a.compound])||(this.domNode.style[a.compound]=d||"");else{const w={};a.partial.forEach(y=>{t[y]&&(w[y]=t[y])}),Object.keys(w).length>0?Object.assign(this.domNode.style,w):this.domNode.style[a.compound]=""}}}}class Li extends et{setProperties({text:e}){this.text=e}createEmptyDomNode(){return document.createTextNode("")}ensureDomNodeAttributesSet(){this.domNode.nodeValue=this.text}synchronizeDomNodeStyle(e){}}class Di extends ui{constructor(e,t={}){const{creator:o=null,fullWindow:a=!0}=t;return super(),this.key||(this.key=t.key?t.key:null),this.animate=typeof t.animate>"u"?!0:t.animate,this.animate,this.creator=o,this.rootElement=e,a&&(document.body.style.margin="0px",document.body.style.width="100%",document.body.style.height=window.innerHeight+"px",this.rootElement.style.width="100%",this.rootElement.style.height="100%",this.rootElement.style.overflow="hidden",window.addEventListener("resize",()=>{document.body.style.height!=window.innerHeight+"px"&&(document.body.style.height=window.innerHeight+"px"),ni(()=>{this.flow&&(this.flow.bounds={width:window.innerWidth,height:window.innerHeight})})})),this.state=ye({modalDiv:null}),ye(this,this.key)}toString(){return"[target]"+(this.flow?this.flow.toString():"null")}setContent(e){e.bounds={width:window.innerWidth,height:window.innerHeight},super.setContent(e)}ensureContentInPlace(){this.contentPlacementRepeater=repeat(this.toString()+".contentPlacementRepeater",e=>{trace&&console.group(e.causalityString()),placeContent(),clearNode(this.rootElement),this.flow.getPrimitive().givenDomNode=this.rootElement,workOnPriorityLevel(2,()=>this.flow.getPrimitive().ensureDomNodeBuilt()),trace&&console.groupEnd()},{priority:2})}dispose(){super.dispose(),this.animate}create(...e){const t=we(le(e));switch(t.type){case"dom.textNode":return new Li(t);case"dom.elementNode":return new Ei(t)}}}const H=console.log;class it extends Je{constructor(){super(...arguments),q(this,"animateLeaderWidth",!1),q(this,"animateLeaderHeight",!0)}emulateOriginalFootprintsAndFixateAnimatedStyle(e){console.group("Emulate original style and footprints for "+this.changesChain(e)+": "+e.toString());const t=e.domNode,o=t.trailer;switch(e.changes.type){case v.added:case v.moved:this.setupALeaderForIncomingWithOriginalFootprint(t);break}switch(e.changes.type){case v.removed:t.parentNode!==o&&o.appendChild(t),o&&this.show(o);break;case v.moved:o&&this.show(o);break}if(t.ongoingAnimation)switch(this.fixateOriginalInheritedStyles(t),e.changes.type){case v.resident:break;case v.added:this.fixateOriginalTransformAndOpacity(t);break;case v.removed:this.fixateOriginalTransformAndOpacity(t);break;case v.moved:this.fixateOriginalTransformAndOpacity(t);break}else switch(e.changes.type){case v.resident:break;case v.added:this.originalPositionForFlyIn(t);break;case v.removed:this.originalPositionForZoomOut(t);break;case v.moved:this.fixateOriginalInheritedStyles(t),this.originalPositionForMoveAndResize(t);break}console.groupEnd()}originalPositionForFlyIn(e){Object.assign(e.style,{position:"absolute",transform:"matrix(1, 0, 0, 1, 0, -"+e.changes.targetDimensions.heightWithoutMargin+")",width:e.changes.targetDimensions.widthWithoutMargin+"px",height:e.changes.targetDimensions.heightWithoutMargin+"px",opacity:"0.001"})}activateAnimation(e){const t=e.domNode,o=t.ongoingAnimation;e.changes;const a=t.trailer,d=t.leader;if(console.group("Activate for "+this.changesChain(e)+": "+e.toString()),H(U(t.style,this.typicalAnimatedProperties)),t.leader&&H(U(t.leader.style,this.typicalAnimatedProperties)),t.trailer&&H(U(t.trailer.style,this.typicalAnimatedProperties)),o)switch(e.changes.type){case v.added:if(this.targetPositionForZoomIn(t),this.targetSizeForLeader(t,t.leader),a)throw new Error("Internal error, should not happen!");break;case v.resident:e.outOfPosition&&(delete e.outOfPosition,this.targetPositionForMovingInsideContainer(t));break;case v.moved:this.targetPositionForMoved(t),this.targetSizeForLeader(t,t.leader),t.trailer&&this.targetSizeForTrailer(t.trailer);break;case v.removed:this.targetPositionForFlyOut(t),this.targetSizeForTrailer(t.trailer);break}else switch(e.changes.type){case v.added:if(this.targetPositionForZoomIn(t),this.targetSizeForLeader(t,t.leader),a)throw new Error("Internal error, should not happen!");this.startAnimationChain(t);break;case v.resident:e.outOfPosition&&(this.startAnimationChain(t),delete e.outOfPosition,this.targetPositionForMovingInsideContainer(t));break;case v.moved:this.targetPositionForMoved(t),this.targetSizeForLeader(t,t.leader),t.trailer&&this.targetSizeForTrailer(t.trailer),this.startAnimationChain(t);break;case v.removed:this.targetPositionForFlyOut(t),this.targetSizeForTrailer(t.trailer),this.startAnimationChain(t);break}H(U(e.domNode.style,this.typicalAnimatedProperties)),d&&H(U(d.style,this.typicalAnimatedProperties)),t.trailer&&H(U(t.trailer.style,this.typicalAnimatedProperties)),console.groupEnd()}targetPositionForFlyOut(e){e.style.transition=this.removeTransition(),Object.assign(e.style,{transform:"matrix(1, 0, 0, 1, 0, -"+e.changes.originalDimensions.heightWithoutMargin+")",opacity:"1"})}}class Mi extends it{constructor(){super(...arguments),q(this,"animateLeaderWidth",!0),q(this,"animateLeaderHeight",!1)}originalPositionForFlyIn(e){Object.assign(e.style,{position:"absolute",transform:"matrix(1, 0, 0, 1, -"+e.changes.targetDimensions.widthWithoutMargin+", 0)",width:e.changes.targetDimensions.widthWithoutMargin+"px",height:e.changes.targetDimensions.heightWithoutMargin+"px",opacity:"0.001"})}targetPositionForFlyOut(e){e.style.transition=this.removeTransition(),Object.assign(e.style,{transform:"matrix(1, 0, 0, 1, -"+e.changes.originalDimensions.widthWithoutMargin+", 0)",opacity:"1"})}}new it;new Mi;si({warnWhenNoKey:!1,traceReactivity:!1,autoAssignProperties:!0});new Di(document.getElementById("flow-root")).setContent(new Bi);class Bi{render(){return wi(bi("Hello World"))}}
